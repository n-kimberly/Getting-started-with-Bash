#!/bin/bash

# Use mktemp to generate unique filename
tmp1filename=$(mktemp /tmp/kim1.XXX)
tmp2filename=$(mktemp /tmp/kim2.XXX)

# Use trap to remove files if command is interrupted
trap "rm -f $tmp1filename $tmp2filename && echo 'kimbyout'; exit 1" INT

# Let user know what autogenerated filenames are
echo Output files will be named $tmp1filename $tmp2filename

# Run sleep command for one second, log, and do again for two seconds
sleep 1
cat /proc/interrupts > $tmp1filename
sleep 2
cat /proc/interrupts > $tmp2filename

# Print their diffs (for kicks and giggles)
echo $(diff $tmp1filename $tmp2filename)
